{%extends "base-enjoy.html"%} 


<script src="{{STATIC_URL}}video.js" type="text/javascript" charset="utf-8"></script>
<script src="{{STATIC_URL}}mute.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="{{STATIC_URL}}css/1video-js.css" type="text/css" media="screen" title="Video JS" charset="utf-8">
<link rel="stylesheet" href="{{STATIC_URL}}css/card.css" type="text/css" media="screen" title="Video JS" charset="utf-8">
<script type="text/javascript" charset="utf-8">
VideoJS.setupAllWhenReady();
</script>






{%block topbar%}
		<a href="{{card.guide.get_absolute_url}}">Back to {{card.guide.title|title}} Index</a>
{%endblock%}

{% block content %} 

{%load markup%}

<div id="card_wrap" class="box">
	<div class="card" data-id="{{card.slug}}">

			{%if card.title%}
			<h1>{{card.title}} </h1>
			{%endif%}
			
			{%if card.text and card.text_on_top%}
			<div class="card_text">
				{{card.text}}
			</div>
			{%endif%}
			
			<div class="card_media">
			
				    {%if card.primary_media.type == "video"%}
				        <div class="video-js-box">
      					<video id="example_video_1" 
      					class="video-js"
      					width="640" 
      					height="264" 
      					poster="" 
      					autoplay="{%if el.autoplay == "True"%} autoplay{%else%}false{%endif%}" 
      					controls preload>
       					<source src="{{el.file}}" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
       					Browser doesn't support HTML5 video.
      					</video>
  					    </div>    
				    {%endif%}
				    
				    {%if card.primary_media.type == "audio"%}
				    	<div class="audio">
				    	<audio 
				    	src="{{el.file}}"  
				    	autoplay="{%if el.autoplay == "True"%}autoplay{%else%}false{%endif%}" 
				    	controls="controls">
						</audio>
				    {%endif%}
					
					{%if card.primary_media.type == "image"%}
					<div class="media_el is_primary" 
					style="
					background:url('{{card.primary_media.file}}') no-repeat center center;
					background-size: contain;
					padding: 20px 0px 20px 0px; 
					">
					</div>
						{%if card.primary_media|length > 1 %}
							{%for el in media_elements %}
								<div class="media_el is_thumb" 
								style="
								background:url('{{el.file}}') no-repeat center center;
								background-size: contain;
								padding: 40px 20px 100px 20px; 
								">
								</div>
					 		{%endfor%}
				   		{%endif%}
				    {%endif%}
			</div>
					
			
			{%if card.text and not card.text_on_top%}
			<div class="card_text">
				{{card.text|markdown}}
			</div>
			{%endif%}
				
			<div class="card_interactive_elements">	
				{%for el in input_elements%}
					<div class="interactive_element">
						{%include el.el_template%}
					</div>
				{%endfor%}
			</div>
			
			
			
			<div class="muteall" style="float: left">
			<span class="mute">Mute All:</span>
			</div>
			<div id="mutebutton" class="mute" style="display:inline">
			<form name="mute_checkbox">
			<input type="checkbox" name="radio_mute">
			</form>
			</div>
			
			<script>
			$('#mutebutton').click(function() {
 		    if(($('video').prop('muted') == false) || ($('audio').prop('muted') == false))  {
				$('video').prop('muted', true);
				$('audio').prop('muted', true);
				}
			else{
				$('video').prop('muted', false);
				$('audio').prop('muted', false);			
				}
			});
			</script>
			
						




			{%if card.show_last_and_next_buttons%}
			<div class="prev_and_next">
				{%if prev_card%}<div class="interactive_element" style="float:left"><a href="{{prev_card.get_absolute_url}}">← Previous</a></div>{%endif%}
				
				{%if next_card%}<div class="interactive_element"><a href="{{next_card.get_absolute_url}}">Next →</a></div>{%endif%}
			
			</div>
			{%endif%}
			
			</div> {# end .card #}
</div> {# end #card_wrap #}






{% endblock %}
