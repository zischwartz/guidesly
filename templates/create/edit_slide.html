{%extends "base-create.html"%}

{%block header%}
	
	{%if s.brand_new%}
	Add Step
	{%else%}
	Edit Step
	{%endif%}
	
	<a href="{% url SlideDetailView gslug=s.guide.slug, slug=s.slug %}"> View Step</a> | <a href="{% url EditGuide gslug=s.guide.slug %}"> View All Steps in <i>{{s.guide.title}}</i> </a>

{%endblock%}

{%block content%}
	{%load verbatim_templatetag%}
	{# <form action="" method="post" > #}
	<form action="" method="post" data-bind="submit: save">
		<div id="slide_being_edited" class="{%if s.brand_new%}brand_new{%endif%}">
		{% csrf_token %}	
		<h1 class="slide_title" data-bind="text:title">{{s.title}}</h1>
		<input class="slide_title" data-bind="value:title, valueUpdate:'afterkeydown'" type="text" name="title" {# value="{{s.title}}"  maxlength="250" placeholder="Slide Title" />
		
		<div data-bind="template:{name: 'imageTemplate',  foreach: staticelements}"> </div>

		<input type="hidden" name="slide_number" value="{%firstof s.slide_number '' %}" id="id_slide_number" />
		<input type="hidden" name="slug" value="{{s.slug}}" id="id_slug" />
		<input type="hidden" name="guide" id="id_guide" value="{{s.guide.id}}">

		{% verbatim %} 		
			<script id='imageTemplate' type='text/html'>
				<div class="image_wrap">
					<img src="${file.file}"> 
					<div class="image_caption">	${title}</div>
				</div>
			</script>
		{%endverbatim%}
	
		<textarea placeholder='Slide text goes here' class="slide_text" name="text" data-bind="value:text"></textarea>


		
			{# {%for e in current_static_elements%} #}
			{# 	<div class="an_element a_static_el" data-id="{{e.id}}" data-title="{{e.title}}"> #}
			{# 		<br>{%if e.file%} <img src="{{e.file_url}}" width="100" height="100">- {%endif%}{{e.title}}<br> #}
			{# 	</div> #}
			{# {%endfor%}	 #}	
	

	
		<br>
	
		{%for el in current_interactive_elements%}
			<div class="an_element an_interactive_el" data-id="{{el.id}}" data-title="{{el.button_text}}">
				{%include el.el_template%}<br>
			</div>
		{%endfor%}
	
		</div> {# end #slide_being_edited #}
	<input class="button" type="submit" value="Save Slide" name ="slide_sub_save"/>
	{# <input class="button" type="submit" value="Save &amp; Add Another Slide" name="slide_sub_add" /> #}
</form> {# end slide form #}

{%endblock%}


{%block sidebar%}
<div id="slide_element_toolbar">

	<h3 id="add_static">Add Media</h3>
	<div id="add_media_group">
		<h4 data-media_type="image">Add Image</h4>
		<h4 data-media_type="video">Add Video</h4>
		<h4 data-media_type="audio">Add Audio</h4>
		<h4 data-media_type="other">Add Other</h4>
	</div>
	
	<h3 id="add_static">Add an Input</h3>
	<div id="add_interactive_group">
		<h4>Add Button</h4>
		<h4>Add Timer</h4>
		<h4>Add Text Question</h4>
	</div>
	
	<h3 id="add_static">Edit Slide Element</h3>

</div> {# end #slide_element_toolbar #}
{%endblock%}
